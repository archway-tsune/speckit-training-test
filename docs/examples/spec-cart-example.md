# Speckit 入力例 - カート管理機能

各コマンドへの入力例です。出力は各コマンドがテンプレートに従って自動生成します。

---

## 1. `/speckit.specify` の入力

自然言語で機能の WHAT（何を）と WHY（なぜ）を記述します。
実装詳細（UI構成・API設計・ディレクトリ構成など）は含めません。

```text
/speckit.specify
# カート管理機能
購入者が商品をカートに追加し、購入前に内容を確認・編集できる機能。購入者（buyer）ログインが必須。

## カートに商品を追加
商品詳細ページから「カートに追加」ボタンで商品をカートに追加できる。
同一商品を再度追加した場合は数量が自動的に増加する。
在庫切れの商品はカート追加ボタンを無効化する。二重送信を防止する。
追加成功時にフィードバックを表示し、ヘッダーのカートアイコンの件数を更新する。
未ログイン時にカート追加を試みた場合はログインページにリダイレクトし、ログイン後は元の商品詳細ページに戻る。

## カート内容の確認
カートページで商品一覧（商品画像・商品名・単価・数量・小計）を確認できる。
合計金額として商品合計・消費税（10%、端数切り捨て）・総合計を表示する。
カートが空の場合は「カートに商品がありません」メッセージと商品一覧への導線を表示する。

## 数量変更
カート内の商品数量を1〜99の範囲かつ在庫数以下で変更でき、小計・合計が即時更新される。
在庫数を超える数量には変更できず、エラーメッセージを表示する。

## 商品の削除
カートから商品を削除できる。削除前に確認ダイアログを表示する。
最後の商品を削除するとカートが空になり、空状態メッセージを表示する。

## カート内容の永続化
カートの内容はページ遷移やブラウザリロード後も保持される。

## 前提
カタログ機能が実装済み。消費税は一律10%（軽減税率対象外）。
カート操作には購入者（buyer）としてのログインが必要。未ログイン時はログインページにリダイレクトし、ログイン後は元のページに戻る。
カートの永続化はインメモリとし、DB永続化は将来フェーズとする。
```

→ spec.md が自動生成される（User Stories, Requirements, Success Criteria）

---

## 2. `/speckit.plan` の入力

spec.md は自動で読み込まれるため、追加の設計指示がある場合のみ引数を渡します。

```text
/speckit.plan
```

引数なし。TDD、スタブ置換、contracts 準拠、navLinks 有効化、日本語記述などの共通指示は constitution に定義済みのため、カート固有の設計判断がなければ追加入力は不要。

→ plan.md, research.md, data-model.md, contracts/ 等が自動生成される

---

## 3. `/speckit.tasks` の入力

spec.md + plan.md は自動で読み込まれるため、追加の指示がある場合のみ引数を渡します。

```text
/speckit.tasks
```

引数なし。TDD、ユーザーストーリー単位のフェーズ分割などの共通指示は constitution に定義済みのため省略可能。

→ tasks.md が自動生成される（フェーズ別・ユーザーストーリー別のタスク一覧）
